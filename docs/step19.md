# 부하 테스트 보고서

## 목차

1. 테스트 개요 및 목적
2. 테스트 대상
3. 테스트 시나리오 및 결과
   1. 좌석 예약 부하 테스트
   2. 예약 가능 좌석 조회 부하 테스트
4. 분석 및 결론

---

## 1. 테스트 개요 및 목적

### 테스트 개요

콘서트 예매 시스템에서 사용자들이 동시에 많이 접근하는 기능에 대해 안정성을 평가하기 위해 부하 테스트를 진행함. 좌석 예약과 예약 가능 좌석 조회 기능을 대상으로 하며, K6을 사용해 테스트를 진행함.

### 테스트 목적

- 많은 사용자가 동시에 기능을 사용했을 때 시스템이 얼마나 안정적인지 파악하고, 성능의 병목 지점을 찾기 위함.
- 평균 응답 시간, 처리량, 오류율 등을 통해 서비스 품질을 평가하고, 개선이 필요한 부분을 찾기 위함.

## 2. 테스트 대상

### 1. 좌석 예약

- **선정 이유**: 좌석 예약은 콘서트 예매 서비스의 핵심 기능이자, 동시에 많은 요청이 발생하는 부분임. 이러한 이유로 안정성과 확장성을 확인하기 위해 테스트 대상에 포함함.

### 2. 예약 가능 좌석 조회

- **선정 이유**: 이 기능은 사용자가 자주 접근하게 되는 기능으로, 높은 트래픽이 예상됨. 또한 실시간 데이터 일관성을 유지해야 하는 중요한 기능이라서 부하 테스트 대상으로 선정함.

## 3. 테스트 시나리오 및 결과

### 3.1 좌석 예약 부하 테스트

- **테스트 대상**: 좌석 예약 API
- **테스트 도구**: K6
- **테스트 기간**: 4분 0.9초
- **최대 가상 사용자 수**: 300 VUs

```javascript
seat_reservation ✓ [ 100% ] 000/300 VUs  4m0s

     ✓ reserve status is 201

     checks.........................: 100.00% 13292 out of 13292
     data_received..................: 1.6 MB  6.7 kB/s
     data_sent......................: 2.5 MB  10 kB/s
     http_req_blocked...............: avg=454.75µs min=93µs    med=266.79µs max=120.6ms  p(90)=483.57µs p(95)=726.3µs
     http_req_connecting............: avg=350.38µs min=55.3µs  med=190.2µs  max=120.43ms p(90)=339.07µs p(95)=519.07µs
     http_req_duration..............: avg=2.69s    min=33.8ms  med=2.98s    max=5.63s    p(90)=3.99s    p(95)=4.51s
       { expected_response:true }...: avg=2.69s    min=33.8ms  med=2.98s    max=5.63s    p(90)=3.99s    p(95)=4.51s
     http_req_failed................: 0.00%   0 out of 13292
     http_reqs......................: 13292   55.18/s
```

#### 3.1.1 테스트 결과

- **총 요청 수**: 13,292
- **평균 요청 처리율**: 55.18 요청/초
- **테스트 성공률**: 100% (13,292/13,292)

#### 3.1.2 상세 성능 지표

- **응답 시간**:
  - 평균: 2.69초
  - 중앙값: 2.98초
  - 최대: 5.63초
  - 90% 응답 시간: 3.99초
  - 95% 응답 시간: 4.51초

### 3.2 예약 가능 좌석 조회 부하 테스트

- **테스트 대상**: 좌석 조회 API
- **테스트 도구**: K6
- **테스트 기간**: 3분 30.9초
- **최대 가상 사용자 수**: 500 VUs

```javascript
available_seats ✓ [ 100% ] 000/500 VUs  3m30s

     ✓ available seats status is 200

     checks.........................: 100.00% 48381 out of 48381
     data_received..................: 10 MB   48 kB/s
     data_sent......................: 5.0 MB  24 kB/s
     http_req_blocked...............: avg=354.6µs  min=78.5µs med=253.4µs  max=81.31ms p(90)=370.3µs p(95)=468µs
     http_req_duration..............: avg=523.89ms min=1.96ms med=467.34ms max=3.18s   p(90)=1.17s   p(95)=1.33s
     http_req_failed................: 0.00%   0 out of 48381
     http_reqs......................: 48381   229.42/s
```

#### 3.2.1 테스트 결과

- **총 요청 수**: 48,381
- **평균 요청 처리율**: 229.42 요청/초
- **테스트 성공률**: 100% (48,381/48,381)

#### 3.2.2 상세 성능 지표

- **응답 시간**:
  - 평균: 523.89ms
  - 중앙값: 467.34ms
  - 최대: 3.18초
  - 90% 응답 시간: 1.17초
  - 95% 응답 시간: 1.33초

## 4. 분석 및 결론

1. **안정성**: 두 테스트 모두 오류율 0%로 안정적인 결과를 보여줌.
2. **처리량**:
   - **좌석 예약**: 초당 55.18개의 요청을 처리했고, 전체적으로 요청 성공률이 높았음.
   - **좌석 조회**: 초당 229.42개의 요청을 처리하며 안정적인 처리량을 보여줌.
3. **응답 시간**:
   - **좌석 예약**: 평균 응답 시간이 2.69초로 다소 길었고, 최대 응답 시간은 5.63초. 이는 개선이 필요함.
   - **좌석 조회**: 평균 응답 시간은 523.89ms로 비교적 빠른 편이었지만, 최대 3.18초까지 걸리는 경우도 있었음.
4. **개선 필요 사항**:
   - **좌석 예약**의 평균 응답 시간과 최대 응답 시간을 줄이기 위해 데이터베이스 최적화 및 캐싱 전략 도입이 필요함.
   - 전체 시스템의 병목 지점을 파악하고, 성능을 높이기 위한 추가적인 최적화 작업이 필요함.
5. **추가 고려 사항**: 데이터베이스 쿼리 최적화, 캐싱 전략 개선, 코드 리팩토링 등을 통해 성능을 높일 수 있는 방안을 검토해야 함. 추가적인 프로파일링을 통해 병목 현상이 발생하는 지점을 정확히 파악하는 것도 도움이 될 것임.

결론적으로, 시스템의 안정성은 유지되고 있지만 응답 시간과 처리량 측면에서 개선의 여지가 있다. 특히 좌석 예약의 평균 응답 시간 감소가 시급하며, 이를 위해 집중적인 최적화 노력이 필요함.
